<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>NovaEngine Pro: AI & 3D</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&family=Syne:wght@400;600;800&display=swap');

:root {
  --bg: #090a0c; --bg2: #101216; --panel: #14161b; --surface: #1b1e25;
  --surface2: #242832; --border: #2c303b; --border2: #3a3f4e;
  --text: #d4d8e8; --text2: #8b94a5; --text3: #5c6375;
  --cyan: #00d4ff; --cyan2: #00a8cc; --purple: #9d4edd; --purple-light: #c77dff;
  --green: #2dd4bf; --orange: #fb8500; --red: #e63946; --yellow: #ffb703;
  --sel: rgba(0,212,255,0.12);
}

* { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 3px; }

body {
  font-family: 'JetBrains Mono', monospace; background: var(--bg); color: var(--text);
  overflow: hidden; height: 100vh; width: 100vw; display: flex; flex-direction: column; font-size: 11px;
}

/* MENU & TOOLBAR */
#menubar {
  height: 28px; background: var(--bg2); border-bottom: 1px solid var(--border);
  display: flex; align-items: center; padding: 0 8px; flex-shrink: 0; z-index: 100; gap: 4px;
}
#logo { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 14px; color: var(--cyan); margin-right: 12px; letter-spacing: 1px; }
.menu-item { padding: 4px 8px; border-radius: 3px; cursor: pointer; color: var(--text2); transition: 0.2s; }
.menu-item:hover { background: var(--surface); color: var(--text); }

#toolbar {
  height: 36px; background: var(--bg2); border-bottom: 1px solid var(--border);
  display: flex; align-items: center; padding: 0 8px; gap: 4px; flex-shrink: 0; overflow-x: auto;
}
.tb-btn {
  height: 24px; padding: 0 10px; background: var(--surface); border: 1px solid var(--border);
  border-radius: 3px; color: var(--text2); cursor: pointer; display: flex; align-items: center; gap: 5px; white-space: nowrap; transition: 0.1s;
}
.tb-btn:hover { background: var(--surface2); color: var(--text); border-color: var(--border2); }
.tb-btn.active { background: var(--sel); color: var(--cyan); border-color: rgba(0,212,255,0.3); }
.tb-btn.run { background: rgba(45, 212, 191, 0.1); color: var(--green); border-color: rgba(45, 212, 191, 0.3); }
.tb-btn.ai { background: rgba(157, 78, 221, 0.1); color: var(--purple-light); border-color: rgba(157, 78, 221, 0.3); font-weight: 600; }
.tb-sep { width: 1px; height: 16px; background: var(--border); margin: 0 4px; }

/* LAYOUT */
#main { flex: 1; display: flex; overflow: hidden; position: relative; }
.panel { background: var(--panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; flex-shrink: 0; }
.panel-header { height: 26px; background: var(--bg2); border-bottom: 1px solid var(--border); display: flex; align-items: center; padding: 0 10px; gap: 6px; }
.panel-tab { padding: 4px 10px; cursor: pointer; color: var(--text3); border-bottom: 2px solid transparent; font-weight: 600; text-transform: uppercase; font-size: 9px; letter-spacing: 0.5px; }
.panel-tab.active { color: var(--text); border-bottom-color: var(--cyan); }

#left-panel { width: 240px; }
#right-panel { width: 280px; border-left: 1px solid var(--border); border-right: none; }
#center { flex: 1; display: flex; flex-direction: column; overflow: hidden; position: relative; }

/* VIEWPORT */
#viewport-header { height: 26px; background: var(--bg2); border-bottom: 1px solid var(--border); display: flex; align-items: center; padding: 0 8px; gap: 4px; flex-shrink: 0; }
.vp-mode-btn { padding: 2px 8px; border-radius: 3px; font-size: 10px; cursor: pointer; color: var(--text3); border: none; background: none; transition: 0.2s; }
.vp-mode-btn.active { background: var(--surface); color: var(--cyan); }
#viewport-container { flex: 1; position: relative; background: #07080a; overflow: hidden; }
#viewport-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
#viewport-3d { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: none; }
.overlay-stats { position: absolute; top: 8px; right: 8px; background: rgba(0,0,0,0.7); padding: 6px; border-radius: 4px; color: var(--text2); pointer-events: none; border: 1px solid var(--border); font-size: 9px; line-height: 1.4; }

/* BOTTOM PANEL (Code, Timeline, Assets) */
#bottom { height: 260px; border-top: 1px solid var(--border); display: flex; flex-direction: column; flex-shrink: 0; background: var(--panel); }
#bottom-tabs { display: flex; background: var(--bg2); border-bottom: 1px solid var(--border); }
.b-tab { padding: 6px 12px; color: var(--text3); cursor: pointer; font-size: 10px; border-right: 1px solid var(--border); }
.b-tab.active { background: var(--panel); color: var(--cyan); border-bottom: 1px solid var(--panel); margin-bottom: -1px; }
.bottom-content { flex: 1; display: none; overflow: hidden; }
.bottom-content.active { display: flex; flex-direction: column; }

/* EDITOR */
.editor-container { display: flex; flex: 1; overflow: hidden; background: var(--bg); position: relative; }
.line-numbers { padding: 10px 5px; text-align: right; color: var(--text3); background: var(--bg2); border-right: 1px solid var(--border); user-select: none; width: 40px; }
.code-area { flex: 1; background: transparent; color: var(--text); border: none; padding: 10px; font-family: 'JetBrains Mono', monospace; font-size: 12px; outline: none; resize: none; white-space: pre; line-height: 1.5; }
.minimap { width: 60px; background: var(--bg2); border-left: 1px solid var(--border); opacity: 0.5; }

/* ASSETS / TIMELINE MOCKS */
.asset-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 8px; padding: 10px; overflow-y: auto; }
.asset-item { background: var(--surface); border: 1px solid var(--border); border-radius: 4px; padding: 8px; text-align: center; cursor: pointer; }
.asset-item:hover { border-color: var(--cyan2); }
.timeline-track { display: flex; border-bottom: 1px solid var(--border); height: 24px; align-items: center; }
.track-name { width: 120px; padding-left: 10px; color: var(--text2); border-right: 1px solid var(--border); font-size: 10px; }
.track-frames { flex: 1; background: var(--surface); position: relative; }
.keyframe { position: absolute; width: 6px; height: 6px; background: var(--cyan); transform: rotate(45deg); top: 9px; cursor: pointer; }

/* INSPECTOR / AI UI */
.sidebar-content { flex: 1; overflow-y: auto; padding: 8px; display: none; }
.sidebar-content.active { display: block; }
.prop-group { margin-bottom: 12px; }
.prop-title { font-size: 9px; color: var(--text3); text-transform: uppercase; margin-bottom: 6px; font-weight: 700; display: flex; justify-content: space-between; }
.prop-row { display: flex; align-items: center; margin-bottom: 4px; gap: 6px; }
.prop-label { width: 75px; font-size: 10px; color: var(--text2); }
.prop-input { flex: 1; background: var(--surface); border: 1px solid var(--border); border-radius: 3px; color: var(--text); padding: 4px 6px; font-family: inherit; font-size: 10px; outline: none; min-width: 0; }
.prop-input:focus { border-color: var(--cyan); }
.vec3-group { display: flex; gap: 2px; flex: 1; }

/* AI LIVE CHARACTERS */
.ai-char-card { background: var(--surface); border: 1px solid var(--border); border-radius: 6px; padding: 10px; margin-bottom: 8px; border-left: 3px solid var(--purple); }
.ai-status { display: inline-block; width: 6px; height: 6px; background: var(--green); border-radius: 50%; margin-right: 4px; box-shadow: 0 0 5px var(--green); }
.ai-status.listening { background: var(--yellow); box-shadow: 0 0 5px var(--yellow); }
.ai-btn { background: var(--surface2); border: 1px solid var(--border); color: var(--text); padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 9px; margin-top: 6px; width: 100%; transition: 0.2s; }
.ai-btn:hover { background: rgba(157, 78, 221, 0.2); border-color: var(--purple); color: var(--purple-light); }

/* ASSISTANT TERMINAL */
#ai-terminal { height: 100%; display: flex; flex-direction: column; background: var(--bg); }
.term-output { flex: 1; padding: 10px; overflow-y: auto; color: var(--text2); }
.term-input-row { display: flex; border-top: 1px solid var(--border); }
.term-input { flex: 1; background: var(--surface); border: none; padding: 8px 10px; color: var(--text); font-family: inherit; outline: none; }
.term-msg { margin-bottom: 8px; line-height: 1.4; }
.term-ai { color: var(--purple-light); }
.term-user { color: var(--cyan); }

@media (max-width: 800px) {
  #left-panel { display: none; }
  #right-panel { width: 100%; position: absolute; right: -100%; transition: 0.3s; z-index: 200; height: 100%; }
  #right-panel.open { right: 0; }
  #bottom { height: 200px; }
}
</style>
</head>
<body>

<div id="menubar">
  <div id="logo">NOVA<span style="color:var(--purple)">PRO</span></div>
  <div class="menu-item">File</div>
  <div class="menu-item">Edit</div>
  <div class="menu-item">GameObject</div>
  <div class="menu-item">Components</div>
  <div class="menu-item">Multiplayer</div>
  <div class="menu-item" style="color:var(--purple-light)">AI Agents</div>
  <div class="menu-item">Window</div>
  <div style="flex:1"></div>
  <div style="font-size:9px; color:var(--text3)">Gemini Core Enabled | v3.1</div>
</div>

<div id="toolbar">
  <button class="tb-btn" onclick="document.getElementById('right-panel').classList.toggle('open')">‚ò∞ Panels</button>
  <div class="tb-sep"></div>
  <button class="tb-btn active">‚Üñ Select</button>
  <button class="tb-btn">‚ú• Move</button>
  <button class="tb-btn">‚Üª Rotate</button>
  <button class="tb-btn">‚§° Scale</button>
  <div class="tb-sep"></div>
  <button class="tb-btn">üåê Emulate Network</button>
  <button class="tb-btn">üìà Profiler</button>
  <button class="tb-btn">üí° Bake Lightmap</button>
  <div style="flex:1"></div>
  <button class="tb-btn ai" onclick="activateAssistant()">‚ú¶ Nova Assistant</button>
  <button class="tb-btn run">‚ñ∂ Play</button>
  <button class="tb-btn">‚è∏</button>
</div>

<div id="main">
  <div class="panel" id="left-panel">
    <div class="panel-header">
      <div class="panel-tab active">Hierarchy</div>
      <div class="panel-tab">Post-FX</div>
    </div>
    <div style="padding:10px; color:var(--text3); line-height: 1.8; overflow-y:auto; flex:1;">
      <div style="color:var(--text)">‚ñº MainScene</div>
      <div style="padding-left:15px; color:var(--cyan)">‚îî üé• MainCamera</div>
      <div style="padding-left:15px; color:var(--yellow)">‚îî üí° DirectionalLight</div>
      <div style="padding-left:15px; color:var(--text)">‚ñº Environment</div>
      <div style="padding-left:30px">‚îî üå≤ Terrain</div>
      <div style="padding-left:30px">‚îî ‚òÅÔ∏è SkyboxVolume</div>
      <div style="padding-left:15px; color:var(--purple-light)">‚ñº AI_Manager</div>
      <div style="padding-left:30px; color:var(--text2)">‚îî ü§ñ CyberNinja_NPC</div>
      <div style="padding-left:30px; color:var(--text2)">‚îî ü§ñ Merchant_NPC</div>
      <div style="padding-left:15px; color:var(--orange)">‚îî üåê NetworkSpawner</div>
    </div>
  </div>

  <div id="center">
    <div id="viewport-header">
      <button class="vp-mode-btn" onclick="setView('2d')">2D</button>
      <button class="vp-mode-btn active" onclick="setView('3d')">3D</button>
      <button class="vp-mode-btn">Shader Graph</button>
      <button class="vp-mode-btn">NavMesh</button>
      <div style="flex:1"></div>
      <select style="background:var(--surface); border:1px solid var(--border); color:var(--text3); font-size:9px; padding:2px; border-radius:3px;">
        <option>Perspective</option><option>Orthographic</option>
      </select>
    </div>

    <div id="viewport-container">
      <canvas id="viewport-canvas" style="display:none;"></canvas>
      <div id="viewport-3d" style="display:block;"></div>
      
      <div class="overlay-stats">
        <strong style="color:var(--cyan)">Renderer: WebGL 2.0</strong><br>
        FPS: <span style="color:var(--green)">144</span><br>
        Draw Calls: 24<br>
        Tris: 1.2M<br>
        AI State: <span style="color:var(--purple-light)">Active (Gemini 3.1)</span>
      </div>
    </div>

    <div id="bottom">
      <div id="bottom-tabs">
        <div class="b-tab active" onclick="switchBottom('code')">NovaScript IDE</div>
        <div class="b-tab" onclick="switchBottom('timeline')">Animation Timeline</div>
        <div class="b-tab" onclick="switchBottom('assets')">Asset Browser</div>
        <div class="b-tab" onclick="switchBottom('console')" style="color:var(--purple-light)">‚ú¶ AI Console</div>
      </div>

      <div id="bottom-code" class="bottom-content active">
        <div class="editor-container">
          <div class="line-numbers">1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10</div>
          <textarea class="code-area" spellcheck="false">
import { AIController, GeminiLiveCore } from "nova/ai";
import { NetworkRPC, SyncVar } from "nova/net";

@Component()
export class CyberNinja extends AIController {
    
    @SyncVar() health: f32 = 100.0;
    private brain: GeminiLiveCore;

    async _ready() {
        // Expanded language: native async/await for AI logic
        this.brain = new GeminiLiveCore({ role: "Aggressive Stealth" });
        await this.brain.connectContext(this.gameObject.transform);
    }

    @NetworkRPC("Server")
    func take_damage(amount: f32) {
        this.health -= amount;
        this.brain.triggerEmotion("pain"); // Live AI reaction
    }
}
          </textarea>
          <div class="minimap"></div>
        </div>
      </div>

      <div id="bottom-timeline" class="bottom-content">
        <div style="padding:10px; display:flex; gap:10px; border-bottom:1px solid var(--border); background:var(--surface);">
          <button class="tb-btn">‚è∫ Rec</button><button class="tb-btn">‚ñ∂ Play</button>
          <span style="color:var(--text3); font-size:10px; align-self:center;">Time: 0:02:14 / 60fps</span>
        </div>
        <div style="overflow-y:auto; flex:1;">
          <div class="timeline-track"><div class="track-name">Transform.Pos</div><div class="track-frames"><div class="keyframe" style="left:10%"></div><div class="keyframe" style="left:40%"></div></div></div>
          <div class="timeline-track"><div class="track-name">Material.Albedo</div><div class="track-frames"><div class="keyframe" style="left:15%"></div></div></div>
          <div class="timeline-track"><div class="track-name">AI.Aggression</div><div class="track-frames"><div class="keyframe" style="left:5%"></div><div class="keyframe" style="left:80%"></div></div></div>
        </div>
      </div>

      <div id="bottom-assets" class="bottom-content">
        <div style="padding:6px; background:var(--surface); border-bottom:1px solid var(--border); font-size:9px; color:var(--text3);">res://models/characters/</div>
        <div class="asset-grid">
          <div class="asset-item">üìÅ<br>materials</div>
          <div class="asset-item">üìÅ<br>scripts</div>
          <div class="asset-item">ü§ñ<br>ninja.fbx</div>
          <div class="asset-item">üîä<br>voice.wav</div>
          <div class="asset-item" style="border-color:var(--cyan)">üìÑ<br>ninja.nv</div>
        </div>
      </div>

      <div id="bottom-console" class="bottom-content">
        <div id="ai-terminal">
          <div class="term-output" id="term-out">
            <div class="term-msg term-ai">[Nova Assistant]: System booted. Gemini 3.1 Pro backend connected. Ready to generate shaders, debug NovaScript, or construct logic.</div>
          </div>
          <div class="term-input-row">
            <span style="padding:8px; color:var(--cyan);">></span>
            <input type="text" class="term-input" id="term-in" placeholder="Ask AI to write code, fix bugs, or adjust physics..." onkeydown="handleTerm(event)">
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="panel" id="right-panel">
    <div class="panel-header">
      <div class="panel-tab" onclick="switchRight('inspector')" id="tab-inspector">Inspector</div>
      <div class="panel-tab active" onclick="switchRight('ai')" id="tab-ai" style="color:var(--purple-light)">Live AI</div>
    </div>

    <div id="content-inspector" class="sidebar-content">
      <input class="prop-input" value="CyberNinja_NPC" style="width:100%; font-size:12px; font-weight:bold; margin-bottom:10px; color:var(--cyan); background:var(--surface2);">
      
      <div class="prop-group">
        <div class="prop-title">Transform</div>
        <div class="prop-row"><div class="prop-label">Pos</div><div class="vec3-group"><input class="prop-input" value="12.4"><input class="prop-input" value="0.0"><input class="prop-input" value="-5.2"></div></div>
        <div class="prop-row"><div class="prop-label">Rot</div><div class="vec3-group"><input class="prop-input" value="0"><input class="prop-input" value="90"><input class="prop-input" value="0"></div></div>
        <div class="prop-row"><div class="prop-label">Scale</div><div class="vec3-group"><input class="prop-input" value="1"><input class="prop-input" value="1"><input class="prop-input" value="1"></div></div>
      </div>

      <div class="prop-group">
        <div class="prop-title">Rigidbody (Physics)</div>
        <div class="prop-row"><div class="prop-label">Mass</div><input class="prop-input" value="75.0"></div>
        <div class="prop-row"><div class="prop-label">Kinematic</div><input type="checkbox" checked style="accent-color:var(--cyan)"></div>
      </div>
    </div>

    <div id="content-ai" class="sidebar-content active">
      <div style="font-size:10px; color:var(--text2); margin-bottom:12px; line-height:1.4;">
        Connect game objects to <b>Gemini Live Mode</b>. Characters will respond dynamically via voice and text in real-time.
      </div>

      <div class="ai-char-card">
        <div style="font-weight:700; color:var(--text); margin-bottom:4px;"><span class="ai-status"></span> CyberNinja_NPC</div>
        <div style="font-size:9px; color:var(--text3); margin-bottom:8px;">Model: Gemini 3.1 Live (Voice-Enabled)</div>
        
        <div class="prop-row"><div class="prop-label" style="width:50px">Voice</div>
          <select class="prop-input"><option>Synthesis_V4_Male_Gruff</option><option>Synthesis_V4_Female_Calm</option></select>
        </div>
        <div class="prop-row"><div class="prop-label" style="width:50px">Prompt</div>
          <textarea class="prop-input" style="height:40px; resize:none;">You are a cybernetic ninja. Speak concisely. React to the player's proximity.</textarea>
        </div>
        <div class="prop-row"><div class="prop-label" style="width:50px">Memory</div>
          <input class="prop-input" value="Context-Aware (Last 50 frames)">
        </div>
        
        <button class="ai-btn" onclick="toggleListening(this)">üé§ Start Voice Interaction</button>
      </div>

      <div class="ai-char-card" style="border-left-color:var(--border2); opacity:0.7;">
        <div style="font-weight:700; color:var(--text); margin-bottom:4px;"><span class="ai-status" style="background:var(--border2); box-shadow:none;"></span> Merchant_NPC</div>
        <button class="ai-btn">Attach AI Brain</button>
      </div>
      
      <button class="tb-btn" style="width:100%; justify-content:center; margin-top:10px;">+ New AI Character</button>
    </div>
  </div>
</div>

<script>
// UI Management
function switchBottom(tab) {
  document.querySelectorAll('.b-tab').forEach(e => e.classList.remove('active'));
  document.querySelectorAll('.bottom-content').forEach(e => e.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById(`bottom-${tab}`).classList.add('active');
}

function switchRight(tab) {
  document.getElementById('tab-inspector').classList.remove('active');
  document.getElementById('tab-ai').classList.remove('active');
  document.getElementById('content-inspector').classList.remove('active');
  document.getElementById('content-ai').classList.remove('active');
  
  document.getElementById(`tab-${tab}`).classList.add('active');
  document.getElementById(`content-${tab}`).classList.add('active');
}

function setView(mode) {
  // Simple mock toggle
  const c3d = document.getElementById('viewport-3d');
  const c2d = document.getElementById('viewport-canvas');
  if(mode === '3d') { c3d.style.display = 'block'; c2d.style.display = 'none'; }
  else { c3d.style.display = 'none'; c2d.style.display = 'block'; c2d.style.background = '#111'; }
}

function activateAssistant() {
  switchBottom('console');
  document.getElementById('term-in').focus();
}

// 3D Initialization
const container = document.getElementById('viewport-3d');
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x07080a);
const camera = new THREE.PerspectiveCamera(60, container.clientWidth / container.clientHeight, 0.1, 1000);
camera.position.set(3, 4, 5);
camera.lookAt(0, 1, 0);

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(container.clientWidth, container.clientHeight);
container.appendChild(renderer.domElement);

const grid = new THREE.GridHelper(20, 20, 0x3a3f4e, 0x1b1e25);
scene.add(grid);

const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(5, 10, 5);
scene.add(light);
scene.add(new THREE.AmbientLight(0x404040));

// Mock "CyberNinja" object
const geo = new THREE.CapsuleGeometry(0.5, 1, 4, 8);
const mat = new THREE.MeshStandardMaterial({ color: 0x9d4edd, wireframe: true });
const ninja = new THREE.Mesh(geo, mat);
ninja.position.y = 1;
scene.add(ninja);

window.addEventListener('resize', () => {
  if(container.clientWidth > 0) {
    camera.aspect = container.clientWidth / container.clientHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(container.clientWidth, container.clientHeight);
  }
});

function animate() {
  requestAnimationFrame(animate);
  ninja.rotation.y += 0.01;
  renderer.render(scene, camera);
}
animate();

// AI terminal logic mimicking Gemini Core
function handleTerm(e) {
  if(e.key === 'Enter') {
    const input = e.target;
    const val = input.value.trim();
    if(!val) return;
    
    const out = document.getElementById('term-out');
    out.innerHTML += `<div class="term-msg term-user">> ${val}</div>`;
    input.value = '';
    
    setTimeout(() => {
      let reply = "I've analyzed the request using my Gemini 3.1 Pro backend. ";
      if(val.toLowerCase().includes('shader')) reply += "Generating a custom compute shader for optimal WebGL performance.";
      else if(val.toLowerCase().includes('script')) reply += "Reviewing your NovaScript logic... I suggest using `@NetworkRPC` for proper client synchronization.";
      else reply += "Adjusting scene parameters accordingly.";
      
      out.innerHTML += `<div class="term-msg term-ai">[Nova Assistant]: ${reply}</div>`;
      out.scrollTop = out.scrollHeight;
    }, 800);
  }
}

// Live AI toggle mock
function toggleListening(btn) {
  const status = btn.parentElement.querySelector('.ai-status');
  if(status.classList.contains('listening')) {
    status.classList.remove('listening');
    btn.innerText = "üé§ Start Voice Interaction";
    btn.style.color = "";
  } else {
    status.classList.add('listening');
    btn.innerText = "üõë Stop Listening...";
    btn.style.color = "var(--yellow)";
    
    // Send a message to the AI console
    const out = document.getElementById('term-out');
    out.innerHTML += `<div class="term-msg term-ai" style="color:var(--yellow)">[Live Mode]: Microphone connected. CyberNinja_NPC is now listening...</div>`;
    out.scrollTop = out.scrollHeight;
  }
}
</script>
</body>
</html>
