<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NovaEngine 2D</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&family=Syne:wght@400;600;800&display=swap');

:root {
Â  --bg: #0b0c0f;
Â  --bg2: #111318;
Â  --panel: #13151a;
Â  --surface: #1a1c22;
Â  --surface2: #22252e;
Â  --border: #2a2d38;
Â  --border2: #363a48;
Â  --text: #d4d8e8;
Â  --text2: #8892a8;
Â  --text3: #555f7a;
Â  --cyan: #00d4ff;
Â  --cyan2: #00a8cc;
Â  --purple: #8b5cf6;
Â  --green: #22d67a;
Â  --orange: #f97316;
Â  --red: #f43f5e;
Â  --yellow: #fbbf24;
Â  --blue: #3b82f6;
Â  --kw: #c792ea;
Â  --str: #a3e635;
Â  --num: #f97316;
Â  --cmt: #4a5568;
Â  --fn: #60a5fa;
Â  --type: #7dd3fc;
Â  --sel: rgba(0,212,255,0.15);
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
Â  font-family: 'JetBrains Mono', monospace;
Â  background: var(--bg);
Â  color: var(--text);
Â  overflow: hidden;
Â  height: 100vh;
Â  width: 100vw;
Â  display: flex;
Â  flex-direction: column;
Â  font-size: 12px;
Â  user-select: none;
}

/* MENU BAR */
#menubar {
Â  height: 30px;
Â  background: var(--bg2);
Â  border-bottom: 1px solid var(--border);
Â  display: flex;
Â  align-items: center;
Â  padding: 0 8px;
Â  gap: 2px;
Â  flex-shrink: 0;
Â  z-index: 100;
}

#logo {
Â  font-family: 'Syne', sans-serif;
Â  font-weight: 800;
Â  font-size: 14px;
Â  color: var(--cyan);
Â  margin-right: 12px;
Â  letter-spacing: 2px;
Â  text-shadow: 0 0 20px rgba(0,212,255,0.5);
}

.menu-item {
Â  padding: 4px 10px;
Â  border-radius: 3px;
Â  cursor: pointer;
Â  color: var(--text2);
Â  font-size: 11px;
Â  position: relative;
}
.menu-item:hover { background: var(--surface); color: var(--text); }

.menu-dropdown {
Â  display: none;
Â  position: absolute;
Â  top: 100%;
Â  left: 0;
Â  background: var(--panel);
Â  border: 1px solid var(--border);
Â  border-radius: 4px;
Â  min-width: 180px;
Â  z-index: 1000;
Â  box-shadow: 0 8px 24px rgba(0,0,0,0.5);
}
.menu-item:hover .menu-dropdown { display: block; }

.menu-dropdown-item {
Â  padding: 7px 14px;
Â  cursor: pointer;
Â  color: var(--text2);
Â  display: flex;
Â  justify-content: space-between;
Â  align-items: center;
}
.menu-dropdown-item:hover { background: var(--surface); color: var(--text); }
.menu-dropdown-item .shortcut { color: var(--text3); font-size: 10px; }

.menu-sep { height: 1px; background: var(--border); margin: 2px 0; }

.menu-spacer { flex: 1; }

/* TOOLBAR */
#toolbar {
Â  height: 36px;
Â  background: var(--bg2);
Â  border-bottom: 1px solid var(--border);
Â  display: flex;
Â  align-items: center;
Â  padding: 0 8px;
Â  gap: 2px;
Â  flex-shrink: 0;
}

.tb-btn {
Â  height: 26px;
Â  padding: 0 10px;
Â  background: var(--surface);
Â  border: 1px solid var(--border);
Â  border-radius: 3px;
Â  color: var(--text2);
Â  cursor: pointer;
Â  font-family: inherit;
Â  font-size: 11px;
Â  display: flex;
Â  align-items: center;
Â  gap: 5px;
Â  transition: all 0.15s;
}
.tb-btn:hover { background: var(--surface2); color: var(--text); border-color: var(--border2); }
.tb-btn.active { background: rgba(0,212,255,0.15); color: var(--cyan); border-color: rgba(0,212,255,0.4); }
.tb-btn.primary { background: var(--cyan2); color: #000; border-color: var(--cyan); font-weight: 600; }
.tb-btn.primary:hover { background: var(--cyan); }
.tb-btn.danger { background: rgba(244,63,94,0.15); color: var(--red); border-color: rgba(244,63,94,0.4); }
.tb-btn.danger:hover { background: rgba(244,63,94,0.25); }

.tb-sep { width: 1px; height: 20px; background: var(--border); margin: 0 4px; }

.tb-label { color: var(--text3); font-size: 10px; padding: 0 6px; }

/* MAIN LAYOUT */
#main {
Â  flex: 1;
Â  display: flex;
Â  overflow: hidden;
}

/* PANELS */
.panel {
Â  background: var(--panel);
Â  border-right: 1px solid var(--border);
Â  display: flex;
Â  flex-direction: column;
Â  overflow: hidden;
}

.panel-header {
Â  height: 28px;
Â  background: var(--bg2);
Â  border-bottom: 1px solid var(--border);
Â  display: flex;
Â  align-items: center;
Â  padding: 0 10px;
Â  gap: 6px;
Â  flex-shrink: 0;
}

.panel-title {
Â  font-size: 10px;
Â  font-weight: 600;
Â  color: var(--text2);
Â  text-transform: uppercase;
Â  letter-spacing: 1px;
}

.panel-tabs {
Â  display: flex;
Â  border-bottom: 1px solid var(--border);
Â  background: var(--bg2);
Â  flex-shrink: 0;
}

.panel-tab {
Â  padding: 6px 14px;
Â  font-size: 10px;
Â  font-weight: 500;
Â  color: var(--text3);
Â  cursor: pointer;
Â  border-bottom: 2px solid transparent;
Â  text-transform: uppercase;
Â  letter-spacing: 0.5px;
Â  transition: all 0.15s;
}
.panel-tab:hover { color: var(--text2); }
.panel-tab.active { color: var(--cyan); border-bottom-color: var(--cyan); }

/* LEFT PANEL */
#left-panel { width: 220px; flex-shrink: 0; }

/* SCENE TREE */
#scene-tree {
Â  flex: 1;
Â  overflow-y: auto;
Â  padding: 4px 0;
}

.tree-node {
Â  display: flex;
Â  align-items: center;
Â  height: 24px;
Â  padding-right: 8px;
Â  cursor: pointer;
Â  position: relative;
Â  transition: background 0.1s;
}
.tree-node:hover { background: var(--surface); }
.tree-node.selected { background: var(--sel) !important; }
.tree-node.selected::before {
Â  content: '';
Â  position: absolute;
Â  left: 0;
Â  top: 0;
Â  bottom: 0;
Â  width: 2px;
Â  background: var(--cyan);
}

.tree-indent { display: flex; align-items: center; }
.tree-arrow {
Â  width: 14px;
Â  height: 14px;
Â  display: flex;
Â  align-items: center;
Â  justify-content: center;
Â  color: var(--text3);
Â  font-size: 8px;
Â  transition: transform 0.2s;
}
.tree-arrow.expanded { transform: rotate(90deg); }
.tree-spacer { width: 14px; }

.tree-icon {
Â  width: 16px;
Â  height: 16px;
Â  margin: 0 4px;
Â  display: flex;
Â  align-items: center;
Â  justify-content: center;
Â  font-size: 12px;
Â  flex-shrink: 0;
}

.tree-name {
Â  flex: 1;
Â  font-size: 11px;
Â  color: var(--text);
Â  white-space: nowrap;
Â  overflow: hidden;
Â  text-overflow: ellipsis;
}
.tree-type {
Â  font-size: 9px;
Â  color: var(--text3);
Â  padding: 1px 5px;
Â  background: var(--surface);
Â  border-radius: 3px;
Â  margin-left: 4px;
}

/* NODE LIBRARY */
#node-library {
Â  padding: 6px;
Â  overflow-y: auto;
}

.node-search {
Â  width: 100%;
Â  background: var(--surface);
Â  border: 1px solid var(--border);
Â  border-radius: 3px;
Â  color: var(--text);
Â  font-family: inherit;
Â  font-size: 11px;
Â  padding: 5px 8px;
Â  margin-bottom: 8px;
Â  outline: none;
}
.node-search:focus { border-color: var(--cyan2); }

.node-category {
Â  margin-bottom: 8px;
}

.node-cat-header {
Â  font-size: 9px;
Â  font-weight: 700;
Â  text-transform: uppercase;
Â  letter-spacing: 1px;
Â  color: var(--text3);
Â  padding: 2px 4px;
Â  margin-bottom: 3px;
Â  display: flex;
Â  align-items: center;
Â  gap: 5px;
Â  cursor: pointer;
}
.node-cat-header::after { content: 'â–¾'; margin-left: auto; }

.node-items {
Â  display: grid;
Â  grid-template-columns: 1fr 1fr;
Â  gap: 3px;
}

.node-btn {
Â  background: var(--surface);
Â  border: 1px solid var(--border);
Â  border-radius: 3px;
Â  padding: 5px 7px;
Â  cursor: pointer;
Â  font-size: 10px;
Â  color: var(--text2);
Â  display: flex;
Â  align-items: center;
Â  gap: 4px;
Â  transition: all 0.15s;
Â  font-family: inherit;
}
.node-btn:hover { background: var(--surface2); color: var(--text); border-color: var(--border2); }

/* CENTER - VIEWPORT */
#center { flex: 1; display: flex; flex-direction: column; overflow: hidden; }

#viewport-header {
Â  height: 28px;
Â  background: var(--bg2);
Â  border-bottom: 1px solid var(--border);
Â  display: flex;
Â  align-items: center;
Â  padding: 0 8px;
Â  gap: 6px;
Â  flex-shrink: 0;
}

.vp-mode-btn {
Â  padding: 3px 8px;
Â  border-radius: 3px;
Â  font-size: 10px;
Â  cursor: pointer;
Â  color: var(--text3);
Â  font-family: inherit;
Â  border: none;
Â  background: none;
}
.vp-mode-btn.active { background: var(--surface); color: var(--cyan); }

#viewport-container {
Â  flex: 1;
Â  position: relative;
Â  background: #0a0b0e;
Â  overflow: hidden;
Â  cursor: crosshair;
}

#viewport-canvas {
Â  position: absolute;
Â  top: 0; left: 0;
Â  image-rendering: pixelated;
}

#game-canvas {
Â  position: absolute;
Â  top: 0; left: 0;
Â  display: none;
}

.vp-overlay {
Â  position: absolute;
Â  top: 8px;
Â  right: 8px;
Â  display: flex;
Â  flex-direction: column;
Â  gap: 4px;
Â  pointer-events: none;
}

.vp-info {
Â  background: rgba(13,14,15,0.85);
Â  border: 1px solid var(--border);
Â  border-radius: 4px;
Â  padding: 4px 8px;
Â  font-size: 10px;
Â  color: var(--text2);
}

/* BOTTOM */
#bottom {
Â  height: 200px;
Â  border-top: 1px solid var(--border);
Â  display: flex;
Â  flex-direction: column;
Â  flex-shrink: 0;
}

#editor-area {
Â  flex: 1;
Â  display: flex;
Â  overflow: hidden;
}

#code-editor-wrapper {
Â  flex: 1;
Â  display: flex;
Â  flex-direction: column;
Â  overflow: hidden;
}

#code-editor-header {
Â  height: 28px;
Â  background: var(--bg2);
Â  border-bottom: 1px solid var(--border);
Â  display: flex;
Â  align-items: center;
Â  padding: 0 8px;
Â  gap: 8px;
Â  flex-shrink: 0;
}

.editor-file-tab {
Â  padding: 4px 12px;
Â  border-radius: 3px 3px 0 0;
Â  font-size: 10px;
Â  cursor: pointer;
Â  color: var(--text3);
Â  border: 1px solid transparent;
Â  display: flex;
Â  align-items: center;
Â  gap: 5px;
}
.editor-file-tab.active {
Â  background: var(--panel);
Â  color: var(--text);
Â  border-color: var(--border);
Â  border-bottom-color: var(--panel);
}

#code-editor-container {
Â  flex: 1;
Â  display: flex;
Â  overflow: hidden;
Â  position: relative;
}

#line-numbers {
Â  background: var(--bg2);
Â  border-right: 1px solid var(--border);
Â  padding: 8px 4px;
Â  min-width: 40px;
Â  text-align: right;
Â  font-size: 11px;
Â  line-height: 1.6;
Â  color: var(--text3);
Â  overflow: hidden;
Â  flex-shrink: 0;
Â  user-select: none;
}

#code-editor {
Â  flex: 1;
Â  background: transparent;
Â  color: transparent;
Â  caret-color: var(--cyan);
Â  border: none;
Â  outline: none;
Â  padding: 8px;
Â  font-family: 'JetBrains Mono', monospace;
Â  font-size: 11px;
Â  line-height: 1.6;
Â  resize: none;
Â  tab-size: 4;
Â  position: absolute;
Â  top: 0; left: 40px; right: 0; bottom: 0;
Â  white-space: pre;
Â  overflow: auto;
Â  z-index: 2;
}

#code-highlight {
Â  position: absolute;
Â  top: 0; left: 40px; right: 0; bottom: 0;
Â  padding: 8px;
Â  font-family: 'JetBrains Mono', monospace;
Â  font-size: 11px;
Â  line-height: 1.6;
Â  pointer-events: none;
Â  white-space: pre;
Â  overflow: hidden;
Â  z-index: 1;
Â  color: var(--text);
}

/* Syntax highlighting */
.tok-kw { color: var(--kw); font-style: italic; }
.tok-str { color: var(--str); }
.tok-num { color: var(--num); }
.tok-cmt { color: var(--cmt); font-style: italic; }
.tok-fn { color: var(--fn); }
.tok-type { color: var(--type); }
.tok-op { color: var(--cyan); }
.tok-self { color: var(--purple); font-style: italic; }
.tok-builtin { color: var(--yellow); }

/* CONSOLE */
#console-panel {
Â  width: 300px;
Â  border-left: 1px solid var(--border);
Â  display: flex;
Â  flex-direction: column;
Â  flex-shrink: 0;
}

#console-output {
Â  flex: 1;
Â  overflow-y: auto;
Â  padding: 6px;
Â  font-size: 10px;
Â  line-height: 1.7;
}

.log-line { color: var(--text2); }
.log-warn { color: var(--yellow); }
.log-error { color: var(--red); }
.log-info { color: var(--cyan); }
.log-success { color: var(--green); }
.log-sys { color: var(--purple); }

/* RIGHT PANEL - INSPECTOR */
#right-panel { width: 260px; flex-shrink: 0; border-left: 1px solid var(--border); border-right: none; }

#inspector {
Â  flex: 1;
Â  overflow-y: auto;
Â  padding: 8px;
}

.inspector-section {
Â  margin-bottom: 12px;
}

.inspector-section-header {
Â  font-size: 9px;
Â  font-weight: 700;
Â  text-transform: uppercase;
Â  letter-spacing: 1px;
Â  color: var(--text3);
Â  padding: 4px 0;
Â  border-bottom: 1px solid var(--border);
Â  margin-bottom: 6px;
Â  display: flex;
Â  align-items: center;
Â  gap: 5px;
Â  cursor: pointer;
}

.prop-row {
Â  display: flex;
Â  align-items: center;
Â  margin-bottom: 5px;
Â  gap: 6px;
}

.prop-label {
Â  width: 90px;
Â  font-size: 10px;
Â  color: var(--text2);
Â  flex-shrink: 0;
Â  white-space: nowrap;
Â  overflow: hidden;
Â  text-overflow: ellipsis;
}

.prop-input {
Â  flex: 1;
Â  background: var(--surface);
Â  border: 1px solid var(--border);
Â  border-radius: 2px;
Â  color: var(--text);
Â  font-family: inherit;
Â  font-size: 11px;
Â  padding: 3px 6px;
Â  outline: none;
Â  min-width: 0;
}
.prop-input:focus { border-color: var(--cyan2); }

.prop-input[type="color"] {
Â  padding: 1px 2px;
Â  width: 36px;
Â  height: 22px;
Â  cursor: pointer;
}

.prop-input[type="checkbox"] {
Â  width: 14px;
Â  height: 14px;
Â  accent-color: var(--cyan);
}

.prop-vec2 { display: flex; gap: 3px; flex: 1; }
.prop-vec2 input { flex: 1; min-width: 0; }

.prop-range { display: flex; gap: 4px; flex: 1; align-items: center; }
.prop-range input[type=range] { flex: 1; accent-color: var(--cyan); }
.prop-range .range-val { width: 36px; text-align: right; }

.prop-select {
Â  flex: 1;
Â  background: var(--surface);
Â  border: 1px solid var(--border);
Â  border-radius: 2px;
Â  color: var(--text);
Â  font-family: inherit;
Â  font-size: 11px;
Â  padding: 3px 6px;
Â  outline: none;
}
.prop-select:focus { border-color: var(--cyan2); }

.node-name-input {
Â  background: var(--surface2);
Â  border: 1px solid var(--border);
Â  border-radius: 3px;
Â  color: var(--cyan);
Â  font-family: 'Syne', sans-serif;
Â  font-size: 14px;
Â  font-weight: 600;
Â  padding: 6px 8px;
Â  width: 100%;
Â  outline: none;
Â  margin-bottom: 8px;
}
.node-name-input:focus { border-color: var(--cyan); }

.node-type-badge {
Â  display: inline-flex;
Â  align-items: center;
Â  gap: 4px;
Â  padding: 3px 8px;
Â  background: var(--surface);
Â  border: 1px solid var(--border);
Â  border-radius: 3px;
Â  font-size: 10px;
Â  color: var(--type);
Â  margin-bottom: 10px;
}

/* SCROLLBAR */
::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-track { background: var(--bg2); }
::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }
::-webkit-scrollbar-thumb:hover { background: var(--text3); }

/* RESIZER */
.resizer {
Â  width: 4px;
Â  background: var(--border);
Â  cursor: col-resize;
Â  flex-shrink: 0;
Â  transition: background 0.15s;
}
.resizer:hover, .resizer.dragging { background: var(--cyan2); }

.resizer-h {
Â  height: 4px;
Â  background: var(--border);
Â  cursor: row-resize;
Â  flex-shrink: 0;
}
.resizer-h:hover, .resizer-h.dragging { background: var(--cyan2); }

/* MODAL */
.modal-overlay {
Â  display: none;
Â  position: fixed;
Â  inset: 0;
Â  background: rgba(0,0,0,0.7);
Â  z-index: 200;
Â  align-items: center;
Â  justify-content: center;
}
.modal-overlay.open { display: flex; }

.modal {
Â  background: var(--panel);
Â  border: 1px solid var(--border);
Â  border-radius: 6px;
Â  width: 500px;
Â  max-height: 80vh;
Â  display: flex;
Â  flex-direction: column;
Â  box-shadow: 0 20px 60px rgba(0,0,0,0.6);
}

.modal-header {
Â  padding: 14px 18px;
Â  border-bottom: 1px solid var(--border);
Â  display: flex;
Â  align-items: center;
Â  justify-content: space-between;
}

.modal-title {
Â  font-family: 'Syne', sans-serif;
Â  font-weight: 600;
Â  font-size: 14px;
Â  color: var(--text);
}

.modal-close {
Â  width: 24px;
Â  height: 24px;
Â  background: var(--surface);
Â  border: none;
Â  border-radius: 3px;
Â  color: var(--text2);
Â  cursor: pointer;
Â  display: flex;
Â  align-items: center;
Â  justify-content: center;
Â  font-size: 14px;
Â  font-family: inherit;
}
.modal-close:hover { background: var(--surface2); color: var(--text); }

.modal-body { padding: 16px 18px; overflow-y: auto; }
.modal-footer { padding: 12px 18px; border-top: 1px solid var(--border); display: flex; justify-content: flex-end; gap: 8px; }

/* NODE ADD GRID */
.node-add-grid {
Â  display: grid;
Â  grid-template-columns: repeat(3, 1fr);
Â  gap: 8px;
Â  margin-top: 12px;
}

.node-add-item {
Â  background: var(--surface);
Â  border: 1px solid var(--border);
Â  border-radius: 4px;
Â  padding: 10px;
Â  cursor: pointer;
Â  display: flex;
Â  flex-direction: column;
Â  align-items: center;
Â  gap: 4px;
Â  transition: all 0.15s;
Â  text-align: center;
}
.node-add-item:hover { background: var(--surface2); border-color: var(--cyan2); }
.node-add-item.selected { background: rgba(0,212,255,0.1); border-color: var(--cyan); }
.node-add-item .icon { font-size: 20px; }
.node-add-item .name { font-size: 10px; color: var(--text); font-weight: 500; }
.node-add-item .desc { font-size: 9px; color: var(--text3); }

/* SHADER EDITOR */
#shader-panel {
Â  width: 320px;
Â  border-left: 1px solid var(--border);
Â  display: none;
Â  flex-direction: column;
}

/* AI ASSISTANT */
#ai-panel {
Â  width: 300px;
Â  border-left: 1px solid var(--border);
Â  display: none;
Â  flex-direction: column;
Â  flex-shrink: 0;
Â  background: var(--panel);
}

.ai-messages {
Â  flex: 1;
Â  overflow-y: auto;
Â  padding: 10px;
Â  display: flex;
Â  flex-direction: column;
Â  gap: 8px;
}

.ai-msg {
Â  padding: 8px 10px;
Â  border-radius: 4px;
Â  font-size: 11px;
Â  line-height: 1.5;
}
.ai-msg.user { background: var(--surface2); color: var(--text); align-self: flex-end; max-width: 90%; }
.ai-msg.ai { background: rgba(0,212,255,0.08); border: 1px solid rgba(0,212,255,0.2); color: var(--text); }

.ai-input-row {
Â  display: flex;
Â  gap: 6px;
Â  padding: 8px;
Â  border-top: 1px solid var(--border);
}

.ai-input {
Â  flex: 1;
Â  background: var(--surface);
Â  border: 1px solid var(--border);
Â  border-radius: 3px;
Â  color: var(--text);
Â  font-family: inherit;
Â  font-size: 11px;
Â  padding: 5px 8px;
Â  outline: none;
Â  resize: none;
Â  height: 28px;
}
.ai-input:focus { border-color: var(--cyan2); }

/* TOOLTIP */
.tooltip {
Â  position: absolute;
Â  background: var(--bg2);
Â  border: 1px solid var(--border);
Â  border-radius: 3px;
Â  padding: 4px 8px;
Â  font-size: 10px;
Â  color: var(--text2);
Â  pointer-events: none;
Â  z-index: 1000;
Â  white-space: nowrap;
}

/* Context menu */
.context-menu {
Â  display: none;
Â  position: fixed;
Â  background: var(--panel);
Â  border: 1px solid var(--border);
Â  border-radius: 4px;
Â  min-width: 160px;
Â  z-index: 500;
Â  box-shadow: 0 8px 24px rgba(0,0,0,0.5);
}
.context-menu.open { display: block; }
.ctx-item {
Â  padding: 7px 14px;
Â  cursor: pointer;
Â  font-size: 11px;
Â  color: var(--text2);
Â  display: flex;
Â  align-items: center;
Â  gap: 8px;
}
.ctx-item:hover { background: var(--surface); color: var(--text); }
.ctx-item.danger { color: var(--red); }
.ctx-sep { height: 1px; background: var(--border); margin: 3px 0; }

/* STATUS BAR */
#statusbar {
Â  height: 22px;
Â  background: var(--bg2);
Â  border-top: 1px solid var(--border);
Â  display: flex;
Â  align-items: center;
Â  padding: 0 10px;
Â  gap: 12px;
Â  flex-shrink: 0;
Â  font-size: 10px;
Â  color: var(--text3);
}

.status-item {
Â  display: flex;
Â  align-items: center;
Â  gap: 4px;
}

.status-dot {
Â  width: 6px;
Â  height: 6px;
Â  border-radius: 50%;
Â  background: var(--green);
Â  animation: pulse-dot 2s infinite;
}

@keyframes pulse-dot {
Â  0%,100% { opacity:1; }
Â  50% { opacity:0.4; }
}

/* ANIMATION in viewport */
.vp-gizmo {
Â  position: absolute;
Â  pointer-events: none;
}

/* GRID BACKGROUND */
.vp-grid {
Â  background-image:
Â  Â  linear-gradient(rgba(42,45,56,0.4) 1px, transparent 1px),
Â  Â  linear-gradient(90deg, rgba(42,45,56,0.4) 1px, transparent 1px);
Â  background-size: 20px 20px;
}

/* ANIMATION PANEL */
#anim-panel {
Â  border-top: 1px solid var(--border);
Â  height: 120px;
Â  background: var(--bg2);
Â  display: none;
Â  flex-direction: column;
Â  flex-shrink: 0;
}

.anim-header {
Â  height: 28px;
Â  border-bottom: 1px solid var(--border);
Â  display: flex;
Â  align-items: center;
Â  padding: 0 8px;
Â  gap: 6px;
}

.anim-timeline {
Â  flex: 1;
Â  display: flex;
Â  overflow: hidden;
}

.anim-tracks {
Â  width: 160px;
Â  border-right: 1px solid var(--border);
Â  overflow-y: auto;
}

.anim-track {
Â  height: 24px;
Â  display: flex;
Â  align-items: center;
Â  padding: 0 8px;
Â  border-bottom: 1px solid rgba(42,45,56,0.5);
Â  font-size: 10px;
Â  color: var(--text2);
}

.anim-keys {
Â  flex: 1;
Â  position: relative;
Â  overflow-x: auto;
}

.anim-ruler {
Â  height: 20px;
Â  border-bottom: 1px solid var(--border);
Â  background: var(--bg2);
Â  position: relative;
}

.keyframe {
Â  width: 8px;
Â  height: 8px;
Â  background: var(--cyan);
Â  border-radius: 50%;
Â  position: absolute;
Â  top: 50%;
Â  transform: translate(-50%, -50%);
Â  cursor: pointer;
}

/* Run button glow */
.run-btn-glow {
Â  box-shadow: 0 0 12px rgba(34,214,122,0.4);
Â  background: rgba(34,214,122,0.2) !important;
Â  color: var(--green) !important;
Â  border-color: rgba(34,214,122,0.5) !important;
}

/* Loading spinner */
@keyframes spin {
Â  to { transform: rotate(360deg); }
}
.spinner {
Â  width: 12px;
Â  height: 12px;
Â  border: 2px solid var(--border);
Â  border-top-color: var(--cyan);
Â  border-radius: 50%;
Â  animation: spin 0.8s linear infinite;
}

/* Physics debug overlay */
.phys-debug rect, .phys-debug circle {
Â  fill: none;
Â  stroke: rgba(244,63,94,0.7);
Â  stroke-width: 1;
}
</style>
</head>
<body>

<!-- MENU BAR -->
<div id="menubar">
Â  <div id="logo">NOVA<span style="color:var(--purple)">2D</span></div>
Â  <div class="menu-item">File
Â  Â  <div class="menu-dropdown">
Â  Â  Â  <div class="menu-dropdown-item" onclick="newProject()">New Project <span class="shortcut">Ctrl+N</span></div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="saveProject()">Save <span class="shortcut">Ctrl+S</span></div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="loadProject()">Open... <span class="shortcut">Ctrl+O</span></div>
Â  Â  Â  <div class="menu-sep"></div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="exportGame()">Export Game</div>
Â  Â  </div>
Â  </div>
Â  <div class="menu-item">Edit
Â  Â  <div class="menu-dropdown">
Â  Â  Â  <div class="menu-dropdown-item" onclick="undo()">Undo <span class="shortcut">Ctrl+Z</span></div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="redo()">Redo <span class="shortcut">Ctrl+Y</span></div>
Â  Â  Â  <div class="menu-sep"></div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="duplicateNode()">Duplicate Node <span class="shortcut">Ctrl+D</span></div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="deleteSelectedNode()">Delete Node <span class="shortcut">Del</span></div>
Â  Â  </div>
Â  </div>
Â  <div class="menu-item">Scene
Â  Â  <div class="menu-dropdown">
Â  Â  Â  <div class="menu-dropdown-item" onclick="showAddNodeModal()">Add Node <span class="shortcut">Ctrl+A</span></div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="clearScene()">Clear Scene</div>
Â  Â  Â  <div class="menu-sep"></div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="loadDemoScene()">Load Demo Scene</div>
Â  Â  </div>
Â  </div>
Â  <div class="menu-item">View
Â  Â  <div class="menu-dropdown">
Â  Â  Â  <div class="menu-dropdown-item" onclick="toggleGrid()">Toggle Grid</div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="togglePhysicsDebug()">Physics Debug</div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="toggleAIPanel()">AI Assistant</div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="toggleAnimPanel()">Animation Panel</div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="toggleShaderPanel()">Shader Editor</div>
Â  Â  Â  <div class="menu-sep"></div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="resetViewport()">Reset Camera</div>
Â  Â  </div>
Â  </div>
Â  <div class="menu-item">Project
Â  Â  <div class="menu-dropdown">
Â  Â  Â  <div class="menu-dropdown-item" onclick="showProjectSettings()">Project Settings</div>
Â  Â  Â  <div class="menu-dropdown-item" onclick="addScript()">New Script</div>
Â  Â  </div>
Â  </div>
Â  <div class="menu-spacer"></div>
Â  <div style="font-size:10px; color:var(--text3)">NovaEngine 2D v1.0</div>
</div>

<!-- TOOLBAR -->
<div id="toolbar">
Â  <button class="tb-btn" onclick="showAddNodeModal()">âŠ• Add Node</button>
Â  <div class="tb-sep"></div>
Â  <button class="tb-btn" id="tool-select" onclick="setTool('select')" style="color:var(--cyan)">â†– Select</button>
Â  <button class="tb-btn" id="tool-move" onclick="setTool('move')">âœ¥ Move</button>
Â  <button class="tb-btn" id="tool-rotate" onclick="setTool('rotate')">â†» Rotate</button>
Â  <button class="tb-btn" id="tool-scale" onclick="setTool('scale')">â¤¡ Scale</button>
Â  <div class="tb-sep"></div>
Â  <button class="tb-btn" onclick="snapToggle()" id="snap-btn">âŠ¡ Snap</button>
Â  <button class="tb-btn" onclick="toggleGrid()">âŠ Grid</button>
Â  <div class="tb-sep"></div>
Â  <button class="tb-btn" onclick="togglePhysicsDebug()">â¬¡ Physics</button>
Â  <button class="tb-btn" onclick="toggleShaderPanel()">â—ˆ Shaders</button>
Â  <button class="tb-btn" onclick="toggleAnimPanel()">â–¶ Animate</button>
Â  <button class="tb-btn" onclick="toggleAIPanel()">âœ¦ AI</button>
Â  <div class="tb-sep"></div>
Â  <div class="menu-spacer"></div>
Â  <button class="tb-btn" id="run-btn" onclick="toggleRun()" style="color:var(--green)">â–¶ Run</button>
Â  <button class="tb-btn" id="pause-btn" onclick="togglePause()" style="color:var(--yellow)">â¸ Pause</button>
Â  <button class="tb-btn danger" onclick="stopRun()">â–  Stop</button>
</div>

<!-- MAIN -->
<div id="main">

Â  <!-- LEFT PANEL -->
Â  <div class="panel" id="left-panel">
Â  Â  <div class="panel-tabs">
Â  Â  Â  <div class="panel-tab active" onclick="switchLeftTab('scene')" id="tab-scene">Scene</div>
Â  Â  Â  <div class="panel-tab" onclick="switchLeftTab('nodes')" id="tab-nodes">Nodes</div>
Â  Â  Â  <div class="panel-tab" onclick="switchLeftTab('assets')" id="tab-assets">Assets</div>
Â  Â  </div>

Â  Â  <!-- Scene Tree -->
Â  Â  <div id="left-scene" style="display:flex;flex-direction:column;flex:1;overflow:hidden;">
Â  Â  Â  <div style="padding:4px 6px; display:flex; gap:4px; border-bottom:1px solid var(--border); flex-shrink:0;">
Â  Â  Â  Â  <button class="tb-btn" style="flex:1;font-size:10px;" onclick="showAddNodeModal()">âŠ• Add</button>
Â  Â  Â  Â  <button class="tb-btn" style="font-size:10px;" onclick="deleteSelectedNode()">âŠ–</button>
Â  Â  Â  Â  <button class="tb-btn" style="font-size:10px;" onclick="duplicateNode()">âŠ•âŠ•</button>
Â  Â  Â  </div>
Â  Â  Â  <div id="scene-tree"></div>
Â  Â  </div>

Â  Â  <!-- Node Library -->
Â  Â  <div id="left-nodes" style="display:none;flex:1;overflow:hidden;flex-direction:column;">
Â  Â  Â  <div id="node-library">
Â  Â  Â  Â  <input class="node-search" type="text" placeholder="Search nodes..." oninput="filterNodes(this.value)">
Â  Â  Â  Â  <div id="node-categories"></div>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <!-- Assets -->
Â  Â  <div id="left-assets" style="display:none;flex:1;overflow:hidden;flex-direction:column;">
Â  Â  Â  <div style="padding:10px; color:var(--text3); font-size:11px; text-align:center; margin-top:20px;">
Â  Â  Â  Â  <div style="font-size:24px;margin-bottom:8px;">ğŸ“</div>
Â  Â  Â  Â  Drop files here<br>or use Import
Â  Â  Â  </div>
Â  Â  Â  <div style="padding:6px;">
Â  Â  Â  Â  <button class="tb-btn" style="width:100%;justify-content:center;" onclick="importAsset()">âŠ• Import Asset</button>
Â  Â  Â  </div>
Â  Â  Â  <div id="asset-list" style="padding:6px; overflow-y:auto; flex:1;"></div>
Â  Â  </div>
Â  </div>

Â  <div class="resizer" id="left-resizer"></div>

Â  <!-- CENTER -->
Â  <div id="center">
Â  Â  <div id="viewport-header">
Â  Â  Â  <button class="vp-mode-btn active" onclick="setViewMode('2d')" id="vm-2d">2D</button>
Â  Â  Â  <button class="vp-mode-btn" onclick="setViewMode('ui')" id="vm-ui">UI</button>
Â  Â  Â  <div style="flex:1"></div>
Â  Â  Â  <span style="font-size:10px;color:var(--text3)" id="vp-coords">0, 0</span>
Â  Â  Â  <span style="font-size:10px;color:var(--text3)">|</span>
Â  Â  Â  <span style="font-size:10px;color:var(--text3)" id="vp-zoom">100%</span>
Â  Â  </div>

Â  Â  <div id="viewport-container" class="vp-grid"
Â  Â  Â  onmousemove="viewportMouseMove(event)"
Â  Â  Â  onmousedown="viewportMouseDown(event)"
Â  Â  Â  onmouseup="viewportMouseUp(event)"
Â  Â  Â  onwheel="viewportWheel(event)"
Â  Â  Â  oncontextmenu="viewportContextMenu(event)">
Â  Â  Â  <canvas id="viewport-canvas"></canvas>
Â  Â  Â  <canvas id="game-canvas"></canvas>
Â  Â  Â  <div class="vp-overlay">
Â  Â  Â  Â  <div class="vp-info" id="fps-counter">FPS: --</div>
Â  Â  Â  Â  <div class="vp-info" id="node-count">Nodes: 0</div>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <!-- ANIMATION PANEL -->
Â  Â  <div id="anim-panel">
Â  Â  Â  <div class="anim-header">
Â  Â  Â  Â  <span style="font-size:10px;font-weight:600;color:var(--text2);text-transform:uppercase;letter-spacing:1px">Animation</span>
Â  Â  Â  Â  <button class="tb-btn" onclick="addAnimTrack()">+ Track</button>
Â  Â  Â  Â  <button class="tb-btn" onclick="addKeyframe()">â—† Key</button>
Â  Â  Â  Â  <select class="prop-select" style="width:120px;" id="anim-select">
Â  Â  Â  Â  Â  <option>idle</option><option>walk</option><option>jump</option>
Â  Â  Â  Â  </select>
Â  Â  Â  Â  <button class="tb-btn" onclick="playAnim()">â–¶ Play</button>
Â  Â  Â  Â  <div style="flex:1"></div>
Â  Â  Â  Â  <button class="tb-btn" onclick="toggleAnimPanel()">âœ•</button>
Â  Â  Â  </div>
Â  Â  Â  <div class="anim-timeline">
Â  Â  Â  Â  <div class="anim-tracks" id="anim-tracks"></div>
Â  Â  Â  Â  <div class="anim-keys">
Â  Â  Â  Â  Â  <div class="anim-ruler" id="anim-ruler"></div>
Â  Â  Â  Â  Â  <div id="anim-keyframes" style="position:relative;flex:1;"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <!-- BOTTOM: CODE + CONSOLE -->
Â  Â  <div id="bottom">
Â  Â  Â  <div class="resizer-h" id="bottom-resizer"></div>
Â  Â  Â  <div id="editor-area">
Â  Â  Â  Â  <div id="code-editor-wrapper">
Â  Â  Â  Â  Â  <div id="code-editor-header">
Â  Â  Â  Â  Â  Â  <span style="font-size:10px;color:var(--text3);font-weight:600;text-transform:uppercase;letter-spacing:1px">Script</span>
Â  Â  Â  Â  Â  Â  <div id="editor-tabs" style="display:flex;gap:2px;flex:1;"></div>
Â  Â  Â  Â  Â  Â  <button class="tb-btn" onclick="runScript()" style="font-size:10px;color:var(--green)">â–¶ Run</button>
Â  Â  Â  Â  Â  Â  <button class="tb-btn" onclick="aiFixCode()" style="font-size:10px;color:var(--purple)">âœ¦ AI Fix</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div id="code-editor-container">
Â  Â  Â  Â  Â  Â  <div id="line-numbers">1</div>
Â  Â  Â  Â  Â  Â  <div id="code-highlight"></div>
Â  Â  Â  Â  Â  Â  <textarea id="code-editor" spellcheck="false"
Â  Â  Â  Â  Â  Â  Â  oninput="onCodeInput()"
Â  Â  Â  Â  Â  Â  Â  onkeydown="onCodeKeydown(event)"
Â  Â  Â  Â  Â  Â  Â  onscroll="syncScroll()"></textarea>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <!-- SHADER PANEL -->
Â  Â  Â  Â  <div id="shader-panel">
Â  Â  Â  Â  Â  <div class="panel-header">
Â  Â  Â  Â  Â  Â  <span class="panel-title">Shader Editor</span>
Â  Â  Â  Â  Â  Â  <div style="flex:1"></div>
Â  Â  Â  Â  Â  Â  <button class="tb-btn" style="font-size:10px;" onclick="applyShader()">Apply</button>
Â  Â  Â  Â  Â  Â  <button class="tb-btn" style="font-size:10px;" onclick="toggleShaderPanel()">âœ•</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="panel-tabs">
Â  Â  Â  Â  Â  Â  <div class="panel-tab active" onclick="switchShaderTab('fragment')" id="st-frag">Fragment</div>
Â  Â  Â  Â  Â  Â  <div class="panel-tab" onclick="switchShaderTab('vertex')" id="st-vert">Vertex</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <textarea id="shader-editor" style="flex:1;background:var(--bg);color:var(--text);border:none;outline:none;padding:8px;font-family:'JetBrains Mono',monospace;font-size:10px;line-height:1.5;resize:none;tab-size:4;"></textarea>
Â  Â  Â  Â  Â  <div id="shader-error" style="padding:4px 8px;font-size:10px;color:var(--red);display:none;"></div>
Â  Â  Â  Â  Â  <div style="padding:6px;border-top:1px solid var(--border);">
Â  Â  Â  Â  Â  Â  <div style="font-size:9px;color:var(--text3);font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:6px;">Uniforms</div>
Â  Â  Â  Â  Â  Â  <div id="shader-uniforms"></div>
Â  Â  Â  Â  Â  Â  <div style="font-size:9px;color:var(--text3);margin-top:6px;">Built-ins: u_time, u_resolution, u_color</div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <!-- AI PANEL -->
Â  Â  Â  Â  <div id="ai-panel">
Â  Â  Â  Â  Â  <div class="panel-header">
Â  Â  Â  Â  Â  Â  <span class="panel-title" style="color:var(--purple)">âœ¦ AI Assistant</span>
Â  Â  Â  Â  Â  Â  <div style="flex:1"></div>
Â  Â  Â  Â  Â  Â  <button class="tb-btn" onclick="toggleAIPanel()">âœ•</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="ai-messages" id="ai-messages">
Â  Â  Â  Â  Â  Â  <div class="ai-msg ai">ğŸ‘‹ Hi! I'm the NovaEngine AI. I can help you:<br><br>
Â  Â  Â  Â  Â  Â  Â  â€¢ Fix bugs in your NovaScript<br>
Â  Â  Â  Â  Â  Â  Â  â€¢ Generate node setups<br>
Â  Â  Â  Â  Â  Â  Â  â€¢ Create shaders<br>
Â  Â  Â  Â  Â  Â  Â  â€¢ Explain engine features<br>
Â  Â  Â  Â  Â  Â  Â  â€¢ Optimize your scene<br><br>
Â  Â  Â  Â  Â  Â  Â  Ask me anything!
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="ai-input-row">
Â  Â  Â  Â  Â  Â  <textarea class="ai-input" id="ai-input" placeholder="Ask the AI..." onkeydown="aiKeydown(e
